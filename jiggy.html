<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        background: #bdc3c7;
      }
    </style>
  </head> 
  <body>
    <canvas id="myCanvas" width="360" height="504"></canvas>

    <button onclick="saveCanvas()">Save Image</button>
    <button onclick="GeneratePuzzle()">Regenerate Puzzle</button>
    <div class="imgContainer">
    </div>
    <script src="jiggy.js"></script>
    <script>
      var canvas = document.getElementById('myCanvas');


      //clear();
      function GeneratePuzzle(){
        
        let colorArray = ['#000']
        let pieceSize = 55;
        canvas.width = 16 * pieceSize;
        canvas.height = 16 * pieceSize;
        let context = canvas.getContext('2d');
        context.strokeStyle = colorArray[Math.floor(Math.random() * colorArray.length)];
        context.lineJoin = 'round';
        context.lineWidth = 1;
        jiggy.GeneratePuzzle(context, pieceSize);
      }
      function saveCanvas(){
        var h = "<img src='"+canvas.toDataURL()+"' alt='from canvas'/>";
        var tab=window.open();
        tab.document.write(h);
      }
      GeneratePuzzle();
    </script>
  </body>
</html>      